<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>JQUERY 3</title>
    <script src="libs/jquery-3.1.0.min.js"></script>
    <style>
        #wrapper {
            width: 1200px;
            margin: 0 auto;
        }
        
        .test1 {
            width: 300px;
            height: 200px;
            border: 1px solid #000;
            padding: 10px;
            margin: 10px;
        }
        
        .test2 {
            width: 300px;
            height: 300px;
            border: 1px solid red;
            padding: 5px;
            margin: 5px;
        }
        
        .test3 {
            width: 100px;
            height: 200px;
            border: 1px solid green;
            padding: 15px;
            margin: 15px;
        }
    </style>
</head>

<body>
    <h2>Заголовок 2 уровня 1</h2>
    <h2>Заголовок 2 уровня 2</h2>
    <p class="test"><b>Тестовый параграф 1</b></p>
    <p class="test"><b>Тестовый параграф 2</b></p>
    <p></p>
    <h2></h2>

    <h3>Заголовок 3 уровня</h3>
    <h3>Заголовок 3 уровня</h3>
    <h3>Заголовок 3 уровня</h3>
    <h3>Заголовок 3 уровня</h3>
    <p class="test"><b>Тестовый параграф 1</b></p>
    <p class="test"><b>Тестовый параграф 2</b></p>
    <p class="www">Тестовый параграф 3</p>
    <h2 class="test"><b><i>Title level 2</i></b></h2>
    <h2 class="test"><i>Title level 2</i></h2>
    <h2><b><i>Title level 2</i></b></h2>
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li class="www">Item 4</li>
        <li>Item</li>
    </ul>
    <ol>
        <li class="test">Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
        <li>Item 5</li>
        <li class="test">Item 6</li>
        <li>Item 7</li>
        <li>Item 8</li>
        <li>Item 9</li>
        <li>Item 10</li>
        <li>Item 11</li>
        <li>Item 12</li>
    </ol>
    <a href="/index.html">LINK 1</a>
    <a href="/home.html" class="www">LINK 2</a>
    <a href="/store.html" class="www">LINK 3</a>

    <input class="in" type="text" name="" id="" value="23">
    <input class="number" type="text" name="" id="" value="33">
    <input class="number" type="text" name="" id="" value="43">
    <input type="text" name="" id="" value="53">
    <textarea class="text" name="" id="" cols="30" rows="10">text text text</textarea>
    <input type="checkbox">
    <input type="checkbox" name="" id="">
    <input type="checkbox" name="" id="">
    <input type="checkbox" name="" id="">
    <input type="checkbox" name="" id="">
    <div id="wrapper">
        <div class="test1">Lorem5656565</div>
        <p></p>
        <div id="test" class="test2">Lorem</div>
        <div class="test3">Lorem</div>
    </div>
    <p class="www">lorem</p>
    <p class="www">lorem</p>
    <p class="www">lorem</p>
    <p class="www">lorem</p>
    <p class="www">lorem</p>

</body>

<script>
    //1. Все абзацы <p>, внутри которых есть <b>, оберните в тег <div>.
    $('p:has(b)').each(function () {
        $(this).wrap('<div></div>');
    });

    //2. Найдите все абзацы <p> с классом .www, поставьте им в начало текст '!', затем добавьте к этим абзацам еще и заголовки h1-h6 и покрасьте эти абзацы и заголовки в красный цвет.
    $('p.www').each(function () {
        $(this).prepend('!').add('<h1></h1>').css('color', 'red')
    });

    //3. Найдите все абзацы <p>, и замените их на тег <div> с таким же содержимым.
    $('p').replaceWith(function () {
        return '<div>' + $(this).text() + '</div>'
    });

    //4. Найдите все чекбоксы на странице и заблокируйте четные из найденных.
    $('input[type=checkbox]:odd').prop('disabled', true);

    //5. Поставьте всем незаблокированным чекбоксам статус "отмечен".
    if ($('input[type=checkbox]').prop('disabled') == false) {
        $('input[type=checkbox]').prop('checked', true);
    };

    //6. Дан элемент #test. Поставьте его непосредственному соседу сверху текст '!', а соседу снизу - текст '?'.
    $('#test').prev().html('!');
    $('#test').next().html('?');

    //7. Дан элемент #test. Поставьте его непосредственным соседям сверху и снизу текст элемента #test.
    $('#test').siblings().html($('#test').text());

    //8. Дан элемент #test. Найдите среди его соседей сверху ближайший абзац и поставьте ему текст элемента #test.
    $('#test').prev('p').html($('#test').text());

    //9. Найдите второй <li> на странице, добавьте ему класс .www, оберните его внутри тегом <i>, вставьте после него <li> с текстом 'привет'.
    $('li').eq(1).addClass('www').wrap('i').add('li').html('привет');

    //10. Найдите десятый <li> на странице, найдите его родителя, получите непосредственного соседа родителя сверху, оберните его в <div class="www">.
    $('li').eq(9).parent().prev().wrap('<div class="www"></div>');

    //11. Каждому абзацу <p>, кроме абзацев с классом .www, добавьте к конец его порядковый номер.
    $('p').not('.www').each(function () {
        $(this).append($(this).index());
    });

    //12. Найдите абзацы <p>, которые стоят непосредственно под <h2> и поставьте перед каждым <h2> копию абзаца, который стоит под ним. Копию покрасьте в красный цвет, а исходный абзац в зеленый.
    $('p').prev('h2').each(function () {
        $(this).css('color', 'green').clone().css('color', 'red').insertBefore('h2');
    });

    //13. Найдите абзацы <p>, которые стоят непосредственно под <h2> и переместите этот абзац так, чтобы он стал непосредственно над <h2>.
    $('p').prev('h2').each(function () {
        $(this).clone().insertBefore('h2');
    });
    //14. Найдите все пустые абзацы <p> (без текста) и вставьте в них текст непосредственного соседа сверху.
    $('p:empty').each(function () {
        $(this).html($(this).prev().text());
    });

    //15. Родителю тега <b>, если это элемент с классом .www или абзац <p>, поставьте красный цвет и размер текста в 30px.
    $('b').parent('.www').css({
        color: 'red',
        fontSize: '30px'
    });
    $('b').parent('p').css({
        color: 'red',
        fontSize: '30px'
    });


    //16. Всем пустым абзацам <p> поставьте текст ближайшего к ним сверху тега <h2>.
    $('p:empty').each(function () {
        $(this).html($(this).prevAll('h2').text());
    });

    //17. Сделайте так, чтобы по нажатию на кнопку каждый инпут взял текст ближайшего инпута снизу (внутри одного родителя).
    $('button').click(function () {
        $('input[type=text]').each(function () {
            $(this).attr('value', $(this).next().attr('value'));
        });
    });

    //18. Любому абзацу <p>, идущему непосредственно после любого заголовка (h1-h6), поставьте в начало текст этого заголовка.
    $(':header+p').prepend($(':header').text());

    //19. Дан элемент #test. Поставьте ему в начало текст непосредственного соседа сверху, а в конец - текст непосредственного соседа снизу.
    $('#test').prepend($('#test').prev().html()).append($('#test').next().html());

    //20. Дан элемент #test. Найдите его второго соседа сверху и его второго соседа снизу. Сделайте так, чтобы найденные элементы обменялись текстом (сосед сверху возьмет текст соседа снизу и наоборот).
    var $sosed1 = $('#test').prev().prev();
    var $sosed2 = $('#test').next().next();
    var $buf = $sosed1.text();
    $sosed1.text($sosed2.text());
    $sosed2.text($buf);

    //21. Дан элемент <div>. Выберите из него всех непосредственных потомков, которые не являются заголовками и покрасьте их в красный цвет.
    $('div').children().not(':header').css('color', 'red');

    //22. Найдите все абзацы <p>, покрасьте их в красный цвет. Затем выберите среди найденных абзацев абзацы с классом .www и поставьте им текст '!'.
    $('p').css('color', 'red').filter('.www').text('!');

    //23. Найдите все абзацы <p> с классом .www, покрасьте их в красный цвет. Затем выберите среди найденных абзацев первый и поставьте ему текст '!', затем выберите последний и ему поставьте текст '?'.
    $('p.www').css('color', 'red').first().text('!');
    $('p.www').last().text('?');

    //24. Найдите все абзацы <p>, поставьте каждому из них в начало тот же текст, который стоит внутри него.
    $('p').each(function () {
        $(this).prepend($(this).text());
    });

    //25. Найдите все абзацы <p>, поставьте каждому из них в конец тот же текст, который стоит внутри него.
    $('p').each(function () {
        $(this).append($(this).text());
    });

    //26. Найдите все абзацы <p>, поставьте каждому из них в конец его порядковый номер в наборе.
    $('p').each(function () {
        $(this).append($(this).index());
    });

    //27. Найдите все абзацы <p>, поставьте каждому из них в в начало его порядковый номер в наборе, а в конец - квадрат его порядкового номера.
    $('p').each(function () {
        var $ind = $(this).index();
        $(this).prepend($ind).append($ind * $ind);
    });

    //28. По нажатию на абзац <p> удалите его непосредственных соседей сверху и с низу.
    $('p').click(function () {
        $(this).prev().remove();
        $(this).next().remove();
    });

    //29. По нажатию на абзац <p> удалите всех его соседей сверху до первого заголовка h1-h6 (то есть элементы, стоящие выше этого заголовка и сам заголовок удалять не надо).
    $('p').click(function () {
        $(this).prev().not(':header').remove();
    });

    //30. По нажатию на абзац <p> удалите его ближайшего нижнего соседа с классом .www.
    $('p').click(function () {
        $(this).next().remove('.www');
    });

    //31. По нажатию на абзац <p> удалите его пятого соседа снизу.
    $('p').click(function () {
        $('p').eq(4).remove();
    });

    //32. По нажатию на абзац <p> удалите его пятого соседа снизу, если это не <h2>.
    $('p').click(function () {
        $('p').eq(4).not('h2').remove();
    });

    //33. По нажатию на абзац <p> удалите его пятого соседа снизу, если этот сосед не имеет внутри себя тега <b>.
    $('p').click(function () {
        $('p').eq(4).not('p(>b)').remove();
    });

    //34. По нажатию на абзац <p> удалите его пятого соседа снизу, если этот сосед не стоит непосредственно после <h2>.
    $('p').click(function () {
        $('p').eq(4).not('h2+p').remove();
    });

    //35. Дан элемент #test. Поменяйте этот элемент местами с его непосредственным соседом снизу.
    var $test = $('#test');
    var $sosed = $test.next();
    $test.detach();
    $test.insertAfter($sosed);

    //36. Дан элемент #test. Поменяйте этот элемент местами с его ближайшим соседом снизу с классом .www.
    var $test = $('#test');
    var $sosed = $test.nextUntil().eq(1);
    $test.detach();
    $test.insertAfter($sosed);

    //37. Дан элемент #test. После его непосредственного соседа снизу вставьте копию нашего элемента.
    $('#test').clone().insertAfter($('#test').next());

    //38. Найдите все абзацы <p>, которые внутри одного родителя лежат между одним и другим <h2>.
    $('.h2-start').nextUntil('.h2-end').css('color', 'red');

    //39. Найдите все элементы, которые внутри одного родителя лежат между <h1> и <h2>, поставьте им в начало текст '!'.
    $('h1').nextUntil('h2').prepend('!');

    //40. Найдите все элементы из #test и перед всеми элементами-не-абзацами, лежащими непосредственно внутри #test, вставьте абзац <p> с таким же текстом, как у элемента под этим абзацем.
    $('#test > :not(p)').each(function () {
        $(this).before('<p>' + $(this).next().text() + '</p>');
    });

    //41. Оберните каждый абзац <p> снаружи в <div> и внутри в <div>.
    $('p').wrap('<div></div>').wrapInner('<div></div>');

    //42. Найдите все абзацы <p>, у которых непосредственный родитель не <div> и оберните их в <div class="www">.
    $(':not(div) > p').wrap('<div class="www"></div>');
    console.log($('p').parent().not('div'));

    //43. Найдите все абзацы <p>. Удалите их родителя (сделайте ему unwrap), если этот родитель не <div> с классом .www. Затем для те абзацы, у которых был удален родитель, оберните в <div> с классом .zzz.
    $(':not(div.www) > p').unwrap().wrap('<div class="zzz"></div>');

    //44. Найдите все элементы из #test с классом .www, но не заголовки (не h1-h6). Удалите их родителя (сделайте ему unwrap), если этот родитель не #test. Затем оберните каждый элемент в <div>.
    $('#test > .www:not(:header)').unwrap($(':not(#test)')).wrap('<div></div>');

    //45. Найдите всех родителей элемента из #test и создайте массив из CSS классов этих родителей.
    var $arr = [];
    $('#test>:parent').each(function () {
        $arr.push($(this).attr('class'));
    });

    //46. Найдите все абзацы <p> с непустым атрибутом class и каждый из них оберните в <div> с теми же классами, как у найденного абзаца, а классы каждого абзаца удалите вместе с атрибутом class.
    $('p').each(function () {
        if ($(this).attr('class') !== undefined) {
            $(this).wrap('<div class="' + $(this).attr('class') + '"></div>').removeAttr('class');
        }
    });

    //47. Найдите все абзацы <p> из #test, поставьте им в конец текст '!', затем исключите из найденных абзацы с классом .www и оставшимся поставьте красный цвет.
    $('#test p').append('!').not('.www').css('color', 'red');

    //48. Найдите все <li> на странице, затем перед предпоследним из найденных вставьте еще один <li> с текстом 'пункт'.
    $('li').last().prev().before('<li>пункт</li>');
    //второй вариант
    $('li').slice(-2, -1).before('<li>пункт</li>');

    //49. Найдите все <li> на странице, затем выберите среди найденных второй, третий и четвертый с конца и поставьте им текст '!'.
    $('li').slice(-4, -1).text('!');

    //50. Найдите все абзацы <p>, лежащие непосредственно вне <div>. Переместите эти абзацы в конец ближайшего div-соседа сверху (внутри одного родителя).
    $('div~p').detach().appendTo('#test');

    //51. Дан элемент #text. Найдите всех его соседей сверху и всех его соседей снизу и поменяйте их местами (то есть все, что стоит до элемента, должно стать после него и наоборот). Показать решение.
    var $prev_neighbor = $('#text').prevAll().detach();
    var $next_neighbor = $('#text').nextAll().detach();
    $prev_neighbor.insertAfter($('#text'));
    $next_neighbor.insertBefore($('#text'));

    //52. Найдите все <ol> и переставьте все <li> в них в обратном порядке.
    var $arr = [];
    $('ol>li').each(function () {
        $arr.push($(this).text());
    });
    $arr = $arr.reverse();
    $('ol>li').each(function () {
        $(this).text($arr[$(this).index()]);
    });

    //53. Найдите все <ol> и отсортируйте в них <li>.
    var $arr = [];
    $('ol>li').each(function () {
        $arr.push($(this).text());
    });
    $arr = $arr.sort();
    $('ol>li').each(function () {
        $(this).text($arr[$(this).index()]);
    });

    //54. Получите все <li> с классом .www, сделайте им красный цвет и границу зеленого цвета, затем найдите среди найденных те <li>, у которых есть класс .bbb и удалите их. Решите все одной цепочкой.
    $('li.www').css({
        color: 'red',
        border: '1px solid green'
    }).remove('.bbb');

    //55. Получите все <li> на странице. Четные из полученных сделайте пустыми, а нечетные удалите.
    $('li:even').empty();
    $('li:odd').remove();

    //56. Получите все <li> на странице. Четные из полученных сделайте пустыми, если у них нет класса .www, а нечетные удалите (не обращая внимание на класс). Пустым <li> добавьте красную границу. Решите все одной цепочкой.
    $('li').remove(':even').not('.www').empty().css('border', '1px solid red');

    //57. Даны абзацы <p>. Сделайте так, чтобы по нажатию левой кнопкой по любому абзацу под ним появлялась копия этого абзаца, а по нажатию правой кнопкой по абзацу этот абзац удалялся.
    $('p').mousedown(function (event) {
        if (event.button == 0) {
            $(this).append('<br><p>' + $(this).text() + '</p>');
        } else if (event.button == 2) {
            $(this).remove();
        }
    });

    //58. Найдите все абзацы <p> и поставьте им размер текста в 30px. Среди найденных найдите абзацы, внутри которых есть тег <b> и поставьте им красный цвет, затем среди изначальной найденных абзацев найдите те, внутри которых есть тег <i> и поставьте им зеленый цвет.
    $('p').css('fontSize', '30px').find('b').css('color', 'red');
    $('p').find('i').css('color', 'green');

    //59. Найдите все теги <div> и удвойте им высоту.
    $('div').height(function (index, value) {
        return value * 2;
    });

    //60. Найдите сумму высот всех <div> на странице.
    var $summ = 0;
    $('div').height(function (index, value) {
        $summ += value;
    });
    alert($summ);

    //61. Найдите список классов всех тегов <div> на странице, верните его в виде массива без дублей.
    var $arr = [];
    var $res = [];
    $('div').each(function () {
        $arr.push($(this).attr('class'));
        $arr.forEach(function (value) {
            if ($res.indexOf(value) === -1) {
                $res.push(value);
            }
        });
        return $res;
    });
    console.log($res);

    //62. Найдите все теги <div>, у которых в атрибуте class ровно 3 класса.
    $('div').each(function () {
        var $str = $(this).attr('class');
        var $new_str = '';
        if ($str !== undefined) {
            $new_str = $str.replace(/\ /gi, '');
            if ($str.length - $new_str.length == 2) {
                console.log($str);
                return $str;
            }
        }
    });

    //63. Для элемента #test найдите ближайшего родителя с классом .www, в конец этого родителя добавьте абзац с текстом '!'.
    $('#test').parent('.www').append('<p>!</p>');

    //64. По нажатию на элемент найдите его ближайшего родителя с классом .www, внутри этого родителя найдите все абзацы и покрасьте их в красный цвет.
    $('*').click(function () {
        $(this).parent('.www').find('p').css('color', 'red')
    });

    //65. Даны текстовые инпуты. Первому поставьте текст 1, через секунду второму поставьте текст 2, еще через секунду третьему текст 3 и так далее.

    //66. Даны два инпута. Сделайте так, чтобы каждые 3 секунды эти инпуты обменивались текстом.
    setInterval(function () {
        var $inp = $('input[type=text]');
        var $text1 = $inp.eq(0).attr('value');
        var $text2 = $inp.eq(1).attr('value');
        $inp.eq(0).attr('value', $text2);
        $inp.eq(1).attr('value', $text1);
    }, 3000);

    //67. Покрасьте первые 10 <li> на странице в красный цвет.
    $('li').slice(0, 10).css('color', 'red');

    //68. Покрасьте с 5-той по 10-ю <li> на странице в красный цвет.
    $('li').slice(4, 10).css('color', 'red');

    //69. Найдите последние 10 <li> на странице, покрасьте их в красный цвет. Затем из найденных найдите четные <li> и оберните их внутри в тег <b>.
    $('li').slice(-10).css('color', 'red').filter(':even').wrap('<b>');

    //70. Дано 5 чекбоксов. Сделайте так, чтобы пользователь мог отметить только два из них (третий просто не будет отмечаться).
    $('input[type=checkbox]').on('click', function () {
        if ($('input:checked').length == 2) {
            $('input[type=checkbox]').not(':checked').attr('disabled', 'true');
        }
    });

    //71. Дано 5 чекбоксов. Сделайте так, чтобы после того, как пользователь отметил два из них, все чекбоксы заблокировались.
    $('input[type=checkbox]').on('click', function () {
        if ($('input:checked').length == 2) {
            $('input[type=checkbox]').attr('disabled', 'true');
        }
    });

    //72. Даны чекбоксов. Сделайте так, чтобы пользователь не мог отметить непосредственного соседа уже отмеченного чекбокса.
    $('input[type=checkbox]').on('click', function () {
        $('input:checked').next().attr('disabled', 'true');
    });

    //73. Даны чекбоксы. Сделайте так, чтобы после первого нажатия на чекбокс он блокировался (пример: чекбокс был неотмеченным, после нажатия он становится отмеченным и блокируется).
    $('input[type=checkbox]').on('click', function () {
        $(this).attr({
            checked: 'true',
            disabled: 'true'
        });
    });

    //74. На странице даны чекбоксы. Подсчитайте, сколько из них отмечены.
    $('input[type=checkbox]').on('click', function () {
        var $n = $('input:checked').length;
        $('p:last-child').html('Отмечено ' + $n);
        console.log($n);
    });

    //75. Сделайте так, чтобы все отмеченные чекбоксы с классом .www стали заблокированными, а неотмеченные стали отмеченными. Решите задачу одной цепочкой.
    $('input[type=checkbox]').not(':checked').attr('checked', 'true').filter('.www').attr('disabled', 'true');

    //76. Сделайте так, чтобы все отмеченные чекбоксы сменили свое состояние на неотмеченное и наоборот.
    $('input[type="checkbox"]').each(function () {
        $(this).prop('checked', !$(this).prop('checked'));
    });

    //77. Сделайте так, чтобы чекбоксы меняли свое состояние по двойному клику и не меняли по одинарному.
    $('input[type=checkbox]').click(function (e) {
        e.preventDefault();
        $(this).dblclick(function () {
            $(this).attr('checked', 'true');
        })
    });

    //78. Даны чекбоксы. По нажатию на любой из них сделайте так, чтобы он не менял свое состояние, а становились отмеченными его ближайший сосед-чекбокс сверху и снизу (а все остальные чекбоксы становились неотмеченными). Между чекбоксами могут стоять любые другие элементы, вам нужно искать ближайшего соседа-чекбокса, а не просто соседа.
    $('input[type=checkbox]').click(function (e) {
        e.preventDefault();
        $(this).prevAll().filter(':checkbox').first().attr('checked', 'true');
        $(this).nextAll().filter(':checkbox').first().attr('checked', 'true');
    });

    //79. Дан инпут, в который можно ввести число. Сделайте так, чтобы при вводе числа в этот инпут и потери фокуса на странице искался чекбокс с таким номером и становился отмеченным, а остальные чекбоксы становились неотмеченными.
    $('#t1').focusout(function () {
        var $input_val = +$(this).val() - 1;
        console.log($input_val);
        $('input[type=checkbox]:eq(' + $input_val + ')').attr('checked', 'true');
    });

    //80. Дан селект и радио кнопочки, количество радио равно количеству пунктов в селекте. Сделайте так, чтобы при выборе пункта в селекте автоматически становилась отмеченной соответствующая радио кнопочка (соответствие по номеру следования: первый пункт списка - первому радио и так далее).
    $('#sel').click(function () {
        var $select_val = +$('#sel :selected').val() - 1;
        $('input[type=radio]:eq(' + $select_val + ')').attr('checked', 'true');
    });

    //81. Дан селект и радио кнопочки, количество радио равно количеству пунктов в селекте. Сделайте так, чтобы при выборе одной из радио кнопочек автоматически становилась отмеченной соответствующий пункт селекта (соответствие по номеру следования: первый пункт списка - первому радио и так далее).
    $('input[type=radio]').click(function () {
        var $select_val = $('input[type=radio]:checked').val();
        $('#sel option').eq($select_val).prop('selected', 'true');
    });

    //82. Дан инпуты. Переместите содержимое атрибута value в атрибут placeholder, а сам атрибут value удалите совсем.
    $('input[type=text]').each(function () {
        $(this).attr('placeholder', $(this).attr('value'));
        $(this).removeAttr('value');
    });

    //83. Дана ссылка. Если атрибут href начинается на http://, добавьте ссылке атрибут target="_blank".
    $('a[href^="http:"]').attr('target', '_blank');

    //84. Дана ссылка. Наш сайт называется site.ru. Если атрибут href начинается на http:// и после него стоит не наш сайт, добавьте ссылке атрибут target="_blank".
    $('a:not([href$="site.ru"])').attr('target', '_blank');
</script>

</html>